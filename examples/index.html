<!doctype html>
<!-- http://elly.lvps83-169-43-251.dedicated.hosteurope.de/ -->
<html lang="en">
    <head>
        <title>[GROW3] Gallery</title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
        <style>body { margin: 0px; overflow: hidden; }</style>
    </head>
    <body>
        <div id="sampleSources" style="display:none">
            <div id="sample1">
                background(0x443333);
                
                var mat1 = new THREE.MeshPhongMaterial({color: 0xbbbbbb});
                var mat2 = new THREE.MeshPhongMaterial({color: 0xddbbbb});

                maxDepth(100);

                rules({
                    spiral : function(){
                        cube(material(mat1).scale(1.2)); 
                        spiral(pitch(-10).roll(13).move(0.6).scale(0.98));
                    },

                    start : function() {
                        for (var i=0; i<720; i+=15) {
                            spiral(scale(0.9).yaw(i/3).pitch(i));
                        }
                    }
                });

            </div>

            <div id="sample2">
                var mat1 = new THREE.MeshPhongMaterial({color: 0xddaa77});
                var mat2 = new THREE.MeshPhongMaterial({color: 0xaadd77});

                maxDepth(120);

                rules({
                    spiralElement : function(){
                        cube(scale(0.5).move(18)); 
                    },

                    spiral : function() {
                         for (var j=0; j<360; j+=0.5) {
                            spiralElement(yaw(j*0.5).roll(j*6));
                        }
                    },

                    arc : function() {
                        cube(scale(0.9)); 
                        arc(pitch(4.0).yaw(7.0).move(-1.3).s(0.97)); 
                    },

                    twistyObject : function() {
                        for (var i=-90; i<=90; i+=60) {
                            for (var j=0; j<360; j+=60) {
                                arc(pitch(i).yaw(j)); 
                            }
                        }
                    },

                    start : function() {
                        twistyObject(material(mat2));
                        spiral(material(mat1));
                    }
                });

            </div>

            <div id="randomRule">
                background(0x222222);
                var mat1 = new THREE.MeshPhongMaterial({color: 0xddccbb});
                var mat2 = new THREE.MeshPhongMaterial({color: 0xccddbb});

                maxDepth(80);

                rules({
                    seg : [ 
                        function(){
                            cube(scale(0.5)); 
                            seg(move(2.0).pitch(-45));
                        },
                        function(){
                            cube(scale(0.5).material(mat1)); 
                            seg(yaw(90).pitch(45).move(1.0));
                        },
                        function(){
                            cube(scale(0.5).material(mat2)); 
                            seg(yaw(-90).move(1.0));
                        }
                    ],

                    start : function() {
                        for (var i=0; i<35; i++) {
                            seg();
                        }
                    }
                });

            </div>

            <div id="randomValue">
                background(0xffffff);
                var mats = [new THREE.MeshPhongMaterial({color: 0xeebbaa}), new THREE.MeshPhongMaterial({color: 0xbbeeaa}) ];

                maxDepth(50);

                rules({
                    seg : function(){
                            cube(scale(0.5)); 
                            seg(move(0.9).roll(rnd(-5, 5)).pitch(rnd(30.0)));
                        },

                    start : function() {
                        for (var i=0; i<60; i++) {
                            seg(yaw(rnd(360)).material(rnd(mats)).move(0.9).roll(rnd(-5, 5)).pitch(rnd(-30.0, 30.0)));
                        }
                    }
                });

            </div>

            <div id="testTranslate">
                var mats = [new THREE.MeshPhongMaterial({color: 0xeebbaa}), new THREE.MeshPhongMaterial({color: 0xbbeeaa}) ];
                maxDepth(50);

                rules({
                    line : function() {
                        for (var x = -5; x < 5; x++) {
                            cube(scale(0.9).move(x).roll(rnd(15)));
                        }
                    },

                    quad : function() {
                        for (var y = -5; y < 5; y++) {
                            line(tH(y));
                        }
                    },

                    start : function() {
                        for (var z = -5; z < 5; z++) {
                            quad(tV(z).material(select(mats, z)));
                        }
                    } 
                });

            </div>

            <div id="testText">
                background(0x555544);
                var mats = [new THREE.MeshPhongMaterial({color: 0xaabbee}), new THREE.MeshPhongMaterial({color: 0xeeaabb}) ];

                var whitman = "Keep your face always toward the sunshine - and shadows will fall behind you. ".split("");

                maxDepth(100);

                rules({
                    step : function() {
                        glyphs(text(whitman).scale(1.3));
                        step(move(1.0).pitch(3.0).roll(3.0).yaw(5.0));
                    },

                    msg : function() {
                        step(move(1.7));
                    },

                    start : function() {
              //          camera(pitch(20).yaw(45).move(14));

                        for (var i = 0; i<30; i++) {
                            cube();
                            msg(pitch(rnd(180)).yaw(rnd(180)).material(rnd(mats)));
                        }
                    } 
                });

            </div>
        </div>
        <script src="../src/lib/three.js"></script>
        <script src="../src/lib/Detector.js"></script>
        <script src="../src/lib/TrackballControls.js"></script>
        <script src="../src/lib/THREEx.FullScreen.js"></script>
        <script src="../src/lib/THREEx.WindowResize.js"></script>
        <script src="../src/lib/dat.gui.min.js"></script>
        <script src="../src/lib/helvetiker_regular.typeface.js"></script>
   
        <script src="../src/grow3.js"></script>
        <script src="../src/grow3.Runner.js"></script>

        <script>
            var examples = collectExamples();

            var settings = { Script : examples[examples.length-1] };

            var runner = new grow3.Runner(document.body);

            window.onload = function() {
                setUpGUI();
                setExample(settings.Script);
            };  

            function setExample(theId) {
                var gScript = document.getElementById(theId).innerText;
                if (gScript === undefined) {
                    gScript = document.getElementById(theId).textContent;
                }

                runner.run(gScript);
            };


            function setUpGUI() {
                var gui = new dat.GUI();
                var exCtrl = gui.add(settings, "Script", examples);

                exCtrl.onFinishChange(function(value) {
                   setExample(value); 
                });
                
            };

            function collectExamples() {
                var exList = [];
                
                var exParent = document.getElementById("sampleSources");
                var len = exParent.children.length;
                for (var i = 0; i<len; i++) {
                    var id = exParent.children[i].getAttribute("id");
                    exList.push(id);
                }
                return exList;
            };
    
        </script>
    </body>
</html>
