<!doctype html>
<!-- http://elly.lvps83-169-43-251.dedicated.hosteurope.de/ -->
<html lang="en">
    <head>
        <title>[GROW3] Test</title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
        <style>body { margin: 0px; overflow: hidden; }</style>
    </head>
    <body>
        <div id="sampleSources" style="display:none">
            <div id="sample1">
                background(0x443333);
                
                var mat1 = new THREE.MeshPhongMaterial({color: 0xbbbbbb});
                var mat2 = new THREE.MeshPhongMaterial({color: 0xddbbbb});

                maxDepth(100);

                rules({
                    spiral : function(){
                        cube(material(mat1).scale(1.2)); 
                        spiral(pitch(-10).roll(13).move(0.6).scale(0.98));
                    },

                    start : function() {
                        for (var i=0; i<720; i+=15) {
                            spiral(scale(0.9).yaw(i/3).pitch(i));
                        }
                    }
                });

            </div>

          </div>
        <script src="src/lib/three.js"></script>
        <script src="src/lib/Detector.js"></script>
        <script src="src/lib/TrackballControls.js"></script>
        <script src="src/lib/THREEx.FullScreen.js"></script>
        <script src="src/lib/THREEx.WindowResize.js"></script>
        <script src="src/lib/dat.gui.min.js"></script>
        <script src="src/lib/helvetiker_regular.typeface.js"></script>
   
        <script src="src/grow3.js"></script>
        <script src="src/grow3.Runner.js"></script>

<!--        <script src="build/grow3.min.js"></script> -->

        <script>
            var examples = collectExamples();

            var settings = { Script : examples[examples.length-1] };

            var runner = new grow3.Runner(document.body);

            window.onload = function() {
                setUpGUI();
                setExample(settings.Script);
            };  

            function setExample(theId) {
                var gScript = document.getElementById(theId).innerText;
                if (gScript === undefined) {
                    gScript = document.getElementById(theId).textContent;
                }

                runner.run(gScript);
            };


            function setUpGUI() {
                var gui = new dat.GUI();
                var exCtrl = gui.add(settings, "Script", examples);

                exCtrl.onFinishChange(function(value) {
                   setExample(value); 
                });
                
            };

            function collectExamples() {
                var exList = [];
                
                var exParent = document.getElementById("sampleSources");
                var len = exParent.children.length;
                for (var i = 0; i<len; i++) {
                    var id = exParent.children[i].getAttribute("id");
                    exList.push(id);
                }
                return exList;
            };
    
        </script>
    </body>
</html>
